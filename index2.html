<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>æ˜Ÿç©ºåœ– - Kidrise å¤©æ–‡åŠ©æ‰‹</title>
    <link rel="stylesheet" href="/kidrise-starmap-2025-08/style.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
</head>
<body>

    <nav class="main-nav">
        <a href="/kidrise-starmap-2025-08/index2.html" class="nav-link active">æ˜Ÿç©ºåœ–</a>
        <a href="/kidrise-starmap-2025-08/planner.html" class="nav-link">ç›®æ¨™è¦åŠƒ</a>
        <a href="/kidrise-starmap-2025-08/compass.html" class="nav-link">å¯¦æ™‚æŒ‡å—é‡</a>
        <a href="/kidrise-starmap-2025-08/knowledge.html" class="nav-link">å¤©æ–‡çŸ¥è­˜</a>
    </nav>

    <div class="content-container">
        <div class="section">
            <h2 id="starmap-title">å³æ™‚æ˜Ÿç©ºåœ–</h2>
            <p id="starmap-intro" class="intro-text">æ‚¨å¯ä»¥ç›´æ¥åœ¨æ˜Ÿåœ–ä¸Šæ‹–æ›³èˆ‡ç”¨é›™æŒ‡ç¸®æ”¾é€²è¡Œæ¢ç´¢ï¼Œæˆ–ä½¿ç”¨ä¸‹æ–¹çš„æŒ‰éˆ•æ›´æ–°æ‚¨çš„è§€æ¸¬åœ°é»ã€‚</p>
            <div id="starmap-container">
                <div id="celestial-map"></div> 
                <p id="message"></p>
            </div>
        </div>

        <div class="section">
            <h2>è§€æ¸¬è¨­å®š</h2>
            <div class="map-controls-panel">
                <div class="control-group">
                    <h4>åœ°ç†ä½ç½®</h4>
                    <p>æ›´æ–°æ‚¨çš„æ‰€åœ¨ä½ç½®ï¼Œä»¥æŸ¥çœ‹å°æ‡‰çš„æœ¬åœ°æ˜Ÿç©ºã€‚</p>
                    <button id="locationButton" class="control-button">ğŸ“ æ›´æ–°ä½ç½®</button>
                </div>
                <div class="control-group">
                    <h4>é™€èºå„€æ¨¡å¼ (æ‰‹æ©Ÿå°ˆç”¨)</h4>
                    <p>é–‹å•Ÿå¾Œï¼Œå°‡æ‰‹æ©Ÿå°å‘å¤©ç©ºï¼Œæ˜Ÿåœ–å°‡éš¨ä¹‹ç§»å‹•ã€‚</p>
                    <button id="skyview-toggle" class="control-button">ğŸ”­ é–‹å•Ÿé™€èºå„€</button>
                </div>
                <div id="art-control-group" class="control-group">
                    <h4>è¦–è¦ºæ•ˆæœ</h4>
                    <p>ç‚ºä¸»è¦æ˜Ÿåº§ç–ŠåŠ ä¸Šæ¼‚äº®çš„è—è¡“åœ–æ¡ˆï¼Œå¢æ·»è¶£å‘³ã€‚</p>
                     <button id="toggle-art-button" class="control-button">ğŸ¨ é¡¯ç¤ºåœ–æ¡ˆ</button>
                </div>
            </div>
        </div>

        <div id="guide-section" class="section guide-section">
             <h2>å¦‚ä½•ä½¿ç”¨äº’å‹•æ˜Ÿç©ºåœ–</h2>
             </div>
    </div>

    <script>
        function isMobileDevice() {
            return ('ontouchstart' in window) || (navigator.maxTouchPoints > 0);
        }

        function loadScript(src, onLoadCallback) {
            const script = document.createElement('script');
            script.src = src;
            script.onload = onLoadCallback;
            document.body.appendChild(script);
        }

        if (isMobileDevice()) {
            // -- æ‰‹æ©Ÿç‰ˆ --
            console.log("åµæ¸¬åˆ°è¡Œå‹•è£ç½®ï¼Œè¼‰å…¥ VirtualSky...");
            
            // è¼‰å…¥ VirtualSky å‡½å¼åº«ï¼Œç„¶å¾Œè¼‰å…¥æˆ‘å€‘çš„æ‰‹æ©Ÿç‰ˆè…³æœ¬
            loadScript('https://slowe.github.io/VirtualSky/stuquery.js', function() {
                loadScript('/kidrise-starmap-2025-08/virtualsky.js', function() {
                    loadScript('/kidrise-starmap-2025-08/mobile_map.js', null);
                });
            });

        } else {
            // -- é›»è…¦ç‰ˆ --
            console.log("åµæ¸¬åˆ°é›»è…¦è£ç½®ï¼Œè¼‰å…¥ d3-celestial...");
            
            // ä¾åºè¼‰å…¥ d3, d3-celestial, å’Œæˆ‘å€‘çš„é›»è…¦ç‰ˆè…³æœ¬
            loadScript('/kidrise-starmap-2025-08/lib/d3.v4.min.js', function() {
                loadScript('/kidrise-starmap-2025-08/lib/d3-celestial.min.js', function() {
                    loadScript('/kidrise-starmap-2025-08/map.js', null);
                });
            });
        }
    </script>
</body>
</html>
